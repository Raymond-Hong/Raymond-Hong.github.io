(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{238:function(e,t,l){},245:function(e,t,l){"use strict";l(238)},253:function(e,t,l){"use strict";l.r(t);l(88);var o={data:()=>({debug:!1,rowcol:4,width:"5rem",height:"5rem",cells:[],cell:{active:!1,backgroundColor:"silver",color:"blue",value:0},color:["lime","orange","khaki","plum","peru","wheat","tomato","lawngreen","pink","gold"],leftMove:!1,rightMove:!1,upMove:!1,downMove:!1,canBackCells:[],cellsRecords:[],gameOver:!1}),created(){this.initGame(),this.getNumbers()},methods:{updateCell(){this.cells=[].concat(this.cells)},updateCellColor(e,t){let l=this.getPower(this.cells[e][t].value);this.cells[e][t].color=this.color[l],this.cells[e][t].backgroundColor=this.color[this.color.length-1-l]},output(){this.debug&&console.log(JSON.stringify(this.cells))},switchToDebug(){this.debug=!this.debug},generate(){if(this.upMove&&this.downMove&&this.leftMove&&this.rightMove)return this.gameOver=!0,void alert("游戏结束");if(this.rightMove||this.leftMove||this.upMove||this.downMove||!this.haveEnoughCell())return this.debug&&(console.log(this.rightMove),console.log(this.leftMove),console.log(this.upMove),console.log(this.downMove)),void this.goBack();let e,t;do{e=Math.round(Math.random()*(this.rowcol-1)),t=Math.round(Math.random()*(this.rowcol-1))}while(this.cells[e][t].active);this.cells[e][t].active=!0,this.cells[e][t].value=2*Math.round(Math.random()+1),this.updateCellColor(e,t)},haveEnoughCell(){if(!this.cells.length)return;let e=0;for(let t=0;t<this.rowcol;t++)for(let l=0;l<this.rowcol;l++)if(!this.cells[t][l].active&&++e>=2)return!0;return this.output(),e},getNumbers(){this.generate(),this.gameOver||(this.generate(),this.gameOver||(this.cellsRecords.push(JSON.parse(JSON.stringify(this.cells))),this.updateCell()))},getPower(e){for(let t=1;t<this.color.length;t++)if(Math.pow(2,t)==e)return t-1;return this.color.length-1},reBackCell(e,t){this.cells[e][t]=JSON.parse(JSON.stringify(this.cell))},twoCellsAdd(e,t){this.cells[t.m][t.n].active&&this.cells[t.m][t.n].value==this.cells[e.m][e.n].value&&(this.cells[e.m][e.n].value*=2,this.updateCellColor(e.m,e.n),this.cells[t.m][t.n]=JSON.parse(JSON.stringify(this.cells[e.m][e.n])),this.reBackCell(e.m,e.n),this.haveEnoughCell()&&1!==this.haveEnoughCell()&&this.allCanMove())},twoCells(e,t){this.cells[t.m][t.n].active||(this.cells[t.m][t.n]=JSON.parse(JSON.stringify(this.cells[e.m][e.n])),this.reBackCell(e.m,e.n),this.haveEnoughCell()&&1!==this.haveEnoughCell()&&this.allCanMove())},allCanMove(){this.downMove=!1,this.leftMove=!1,this.rightMove=!1,this.upMove=!1},rememberBeforeCells(){for(let e=0;e<this.rowcol;e++){this.canBackCells[e]=[];for(let t=0;t<this.rowcol;t++)this.canBackCells[e].push(JSON.parse(JSON.stringify(this.cells[e][t])))}},goBack(){this.cells=[].concat(this.canBackCells)},goBackStepByStep(){let e=--this.cellsRecords.length-1;e>=0&&(this.cells=[].concat(this.cellsRecords[e]))},oneMoveDown(e,t,l){l?this.twoCellsAdd({m:e,n:t},{m:e+1,n:t}):this.twoCells({m:e,n:t},{m:e+1,n:t})},oneMoveUp(e,t,l){l?this.twoCellsAdd({m:e,n:t},{m:e-1,n:t}):this.twoCells({m:e,n:t},{m:e-1,n:t})},oneMoveLeft(e,t,l){l?this.twoCellsAdd({m:e,n:t},{m:e,n:t-1}):this.twoCells({m:e,n:t},{m:e,n:t-1})},oneMoveRight(e,t,l){l?this.twoCellsAdd({m:e,n:t},{m:e,n:t+1}):this.twoCells({m:e,n:t},{m:e,n:t+1})},rowMoveDown(e,t){this.debug&&console.log("rowMove");for(let l=this.rowcol-2;l>=e-1;l--)for(let e=0;e<this.rowcol;e++)this.cells[l][e].active&&this.oneMoveDown(l,e,t)},rowMoveUp(e,t){for(let l=1;l<=this.rowcol-e;l++)for(let e=0;e<this.rowcol;e++)this.cells[l][e].active&&this.oneMoveUp(l,e,t)},colMoveLeft(e,t){for(let l=1;l<=this.rowcol-e;l++)for(let e=0;e<this.rowcol;e++)this.cells[e][l].active&&this.oneMoveLeft(e,l,t)},colMoveRight(e,t){for(let l=this.rowcol-2;l>=e-1;l--)for(let e=0;e<this.rowcol;e++)this.cells[e][l].active&&this.oneMoveRight(e,l,t)},allMoving(e){for(let t=1;t<this.rowcol;t++)e(t);e(1,!0);for(let t=1;t<this.rowcol;t++)e(t)},cellsMoveTo:function(e){let t=e.direction;if(this.gameOver)return;this.rememberBeforeCells();let l,o=this;switch(t){case"left":o.leftMove=!0,l=function(e,t){o.colMoveLeft(e,t)};break;case"right":o.rightMove=!0,l=function(e,t){o.colMoveRight(e,t)};break;case"up":o.upMove=!0,l=function(e,t){o.rowMoveUp(e,t)};break;case"down":o.downMove=!0,l=function(e,t){o.rowMoveDown(e,t)}}o.allMoving(l),o.getNumbers()},initGame(){let e=0;for(;e++<this.rowcol;){let t=0;for(this.cells[e-1]=[];t++<this.rowcol;)this.cells[e-1].push(JSON.parse(JSON.stringify(this.cell)))}},newGame(){this.initGame(),this.gameOver=!1,this.cellsRecords=[],this.cellsRecords=[],this.allCanMove(),this.getNumbers()}}},s=(l(245),l(14)),i=Object(s.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("meta",{attrs:{name:"viewport",content:"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0",charset:"utf-8"}}),e._v(" "),t("table",{directives:[{name:"swipeleft",rawName:"v-swipeleft",value:{fn:e.cellsMoveTo,direction:"left"},expression:"{fn:cellsMoveTo,direction:'left'}"},{name:"swiperight",rawName:"v-swiperight",value:{fn:e.cellsMoveTo,direction:"right"},expression:"{fn:cellsMoveTo,direction:'right'}"},{name:"swipeup",rawName:"v-swipeup",value:{fn:e.cellsMoveTo,direction:"up"},expression:"{fn:cellsMoveTo,direction:'up'}"},{name:"swipedown",rawName:"v-swipedown",value:{fn:e.cellsMoveTo,direction:"down"},expression:"{fn:cellsMoveTo,direction:'down'}"}],staticClass:"gameTable"},e._l(e.rowcol,(function(l){return t("tr",e._l(e.rowcol,(function(o){return t("td",[t("div",{style:{background:e.cells[l-1][o-1].backgroundColor,width:e.width,height:e.height,color:e.cells[l-1][o-1].color,"line-height":e.height,"font-size":"2rem"}},[e._v(e._s(e.cells[l-1][o-1].value||""))])])})),0)})),0),e._v(" "),t("div",{staticClass:"button",on:{click:e.newGame}},[e._v("New Game")])])}),[],!1,null,"787519a2",null);t.default=i.exports}}]);